semantic_models:
  - name: session
    model: ref('fact_session') 
    description: "sessions"
    defaults: 
      agg_time_dimension: event_date

    entities: #joining keys.#
      - name: fact_session_pk
        type: primary
        expr: ga_session_id

      - name: fact_session_fk
        type: foreign
        expr: ga_session_id

      - name: user_id
        type: foreign
        expr: user_id

    dimensions: 
      - name: session_start
        type: time
        type_params:
          time_granularity: day

      - name: session_end
        type: time
        type_params:
          time_granularity: day

      - name: event_date
        type: time
        type_params:
          time_granularity: day

      - name: is_new_user
        type: categorical
        expr: is_new_user

      - name: is_search_included
        type: categorical
        expr: is_search_included


    measures: 
      - name: page_view_count
        description: "page_view_count"
        agg: sum
        expr: page_view_count

      - name: total_sessions
        description: "total_sessions"
        agg: count_distinct
        expr: ga_session_id

      - name: total_users
        description: "total_users"
        agg: count_distinct
        expr: user_id

  - name: device
    model: ref('fact_session_init_device') 
    description: "device"
    
    entities: #joining keys.#

      - name: device_session_pk
        type: primary
        expr: ga_session_id

      - name: device_session_fk
        type: foreign
        expr: ga_session_id

      - name: user_id
        type: foreign
        expr: user_id

    dimensions: 
      - name: device_category
        type: categorical
        expr: device_category

      - name: device_mobile_brand
        type: categorical
        expr: device_mobile_brand

      - name: device_mode_name
        type: categorical
        expr: device_mode_name